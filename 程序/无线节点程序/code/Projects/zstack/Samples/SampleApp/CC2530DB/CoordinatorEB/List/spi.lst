###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.30.1.41636 for 8051             27/May/2017  14:45:06 #
# Copyright 2004-2013 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#                                                                             #
#    Source file        =  E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\Source\hard #
#                          ware\spi.c                                         #
#    Command line       =  -f E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code201704 #
#                          12\code\Projects\zstack\Samples\SampleApp\CC2530DB #
#                          \..\..\..\Tools\CC2530DB\f8wCoord.cfg (-DCPU32MHZ  #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)    #
#                          -f E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code201704 #
#                          12\code\Projects\zstack\Samples\SampleApp\CC2530DB #
#                          \..\..\..\Tools\CC2530DB\f8wConfig.cfg             #
#                          (-DZIGBEEPRO -DSECURE=0 -DZG_SECURE_DYNAMIC=0      #
#                          -DREFLECTOR -DDEFAULT_CHANLIST=0x00000800          #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFF1                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ #
#                          ©ÌïÐ¡Æøºò\code20170412\code\Projects\zstack\Sample #
#                          s\SampleApp\Source\hardware\spi.c -D ZTOOL_P1 -D   #
#                          HAL_PA_LNA -D NV_INIT -D NV_RESTORE -D xMT_TASK    #
#                          -D xMT_SYS_FUNC -D xMT_ZDO_FUNC -D                 #
#                          xLCD_SUPPORTED=DEBUG -lC                           #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\Co #
#                          ordinatorEB\List\ -lA E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ© #
#                          ÌïÐ¡Æøºò\code20170412\code\Projects\zstack\Samples #
#                          \SampleApp\CC2530DB\CoordinatorEB\List\            #
#                          --diag_suppress Pe001,Pa010 -o                     #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\Co #
#                          ordinatorEB\Obj\ -e --no_code_motion --debug       #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 8 -I E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ #
#                          ©ÌïÐ¡Æøºò\code20170412\code\Projects\zstack\Sample #
#                          s\SampleApp\CC2530DB\ -I                           #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \Source\ -I E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\c #
#                          ode20170412\code\Projects\zstack\Samples\SampleApp #
#                          \CC2530DB\..\Source\hardware\ -I                   #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\ZMain\TI2530DB\ -I                          #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\ZMain\ -I E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æ #
#                          øºò\code20170412\code\Projects\zstack\Samples\Samp #
#                          leApp\CC2530DB\..\..\..\..\..\Components\hal\inclu #
#                          de\ -I E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20 #
#                          170412\code\Projects\zstack\Samples\SampleApp\CC25 #
#                          30DB\..\..\..\..\..\Components\hal\target\CC2530EB #
#                          \ -I E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code2017 #
#                          0412\code\Projects\zstack\Samples\SampleApp\CC2530 #
#                          DB\..\..\..\..\..\Components\mac\include\ -I       #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\mac\high_level\ -I         #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\mac\low_level\srf04\ -I    #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\mac\low_level\srf04\single #
#                          _chip\ -I E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\cod #
#                          e20170412\code\Projects\zstack\Samples\SampleApp\C #
#                          C2530DB\..\..\..\..\..\Components\mt\ -I           #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\osal\include\ -I           #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\services\saddr\ -I         #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\services\sdata\ -I         #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\af\ -I               #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\nwk\ -I              #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\sapi\ -I             #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\sec\ -I              #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\sys\ -I              #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\zdo\ -I              #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\zmac\ -I                   #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\zmac\f8w\ -Ohz             #
#                          --require_prototypes                               #
#    List file          =  E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\Co #
#                          ordinatorEB\List\spi.lst                           #
#    Object file        =  E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\Co #
#                          ordinatorEB\Obj\spi.r51                            #
#                                                                             #
#                                                                             #
###############################################################################

E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\code\Projects\zstack\Samples\SampleApp\Source\hardware\spi.c
      1          #include "spi.h"

   \                                 In  segment SFR_AN, at 0xe8
   \   union <unnamed> volatile __sfr _A_IRCON2
   \                     _A_IRCON2:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf1
   \   unsigned char volatile __sfr PERCFG
   \                     PERCFG:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf4
   \   unsigned char volatile __sfr P1SEL
   \                     P1SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf5
   \   unsigned char volatile __sfr P2SEL
   \                     P2SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf8
   \   union <unnamed> volatile __sfr _A_U1CSR
   \                     _A_U1CSR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf9
   \   unsigned char volatile __sfr U1DBUF
   \                     U1DBUF:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfa
   \   unsigned char volatile __sfr U1BAUD
   \                     U1BAUD:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfb
   \   unsigned char volatile __sfr U1UCR
   \                     U1UCR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfc
   \   unsigned char volatile __sfr U1GCR
   \                     U1GCR:
   \   000000                DS 1
      2          
      3          //SPI1µÄÉè¶¨ºÍ´«Êä¿ÉÒÔ²Î¿¼hal_lcd.cÖÐµÄLCD¿ØÖÆÀý×Ó£¬halLcd_ConfigSPI()
      4          
      5          //SPI1³õÊ¼»¯£¬²¨ÌØÂÊ=((256+BAUD_M)*2^BAUD_E/2^28)*Ê±ÖÓÆµÂÊ

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
      6          void SPI1_Init(uint8 BAUD_E,uint8 BAUD_M)
   \                     SPI1_Init:
      7          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
      8            //I/O¿ÚÅäÖÃ
      9            PERCFG|=1<<1;  //USART1(SPI1)Ê¹ÓÃÎ»ÖÃ2£¨Î»ÓÚP1¿Ú)£¬
   \   000000   43F102       ORL     0xf1,#0x2
     10                           //Ö÷Ä£Ê½Ö»Ê¹ÓÃP1_5£¬P1_6£¬P1_7Òý½Å,ÆäÖÐP1_5ÎªCLK£¬P1_6ÎªMOSI£¬P1_7ÎªMISO
     11            P1SEL|=7<<5;   //ÅäÖÃP1_5£¬P1_6£¬P1_7ÎªÍâÉèÒý½Å
   \   000003   43F4E0       ORL     0xf4,#0xe0
     12            //P1SEL&=~0x10;        // P1_4 is GPIO (SSN)
     13            //P1DIR|=0x10;         // SSN is set as output //Ê¹ÓÃP1_4×÷ÎªÈí¼þSSN¹ÜÀíÒý½Å
     14            P2SEL|=1<<5;   //USART1ÓÅÏÈ
   \   000006   43F520       ORL     0xf5,#0x20
     15            
     16            //ÍâÉèÅäÖÃ
     17            U1CSR&=~(1<<7); //USART1Ñ¡ÔñSPIÄ£Ê½
   \   000009   C2FF         CLR     0xf8.7
     18            U1CSR&=~(1<<5); //SPIÖ÷Ä£Ê½
   \   00000B   C2FD         CLR     0xf8.5
     19            U1UCR  = 0x80;      /* Flush and goto IDLE state. 8-N-1. */
   \   00000D   75FB80       MOV     0xfb,#-0x80
     20            U1GCR|=1<<7;  //SPI¿ÕÏÐÊ±SCKÏßµçÆ½×´Ì¬£¬CPOL=0Ê±SCKÎªµÍµçÆ½£¬CPOL=1Ê±SCKÎª¸ßµçÆ½
   \   000010   43FC80       ORL     0xfc,#0x80
     21            U1GCR|=1<<6;  //SPIÊ±ÖÓÏàÎ»£¬CPHA=0Ê±MISOÔÚµÚÒ»¸ö±ßÑØ²ÉÑù£¬CPHA=1Ê±MISOÔÚµÚ¶þ¸ö±ßÑØ²ÉÑù
   \   000013   43FC40       ORL     0xfc,#0x40
     22            U1GCR|=1<<5;  //MSBÏÈ´«ËÍ
   \   000016   43FC20       ORL     0xfc,#0x20
     23            
     24            //Í¨Ñ¶ËÙÂÊÉè¶¨
     25            U1GCR&=0xE0;
   \   000019   12....       LCALL   ?Subroutine0 & 0xFFFF
     26            U1GCR|=BAUD_E&0x1F;  //BAUD_E
     27            U1BAUD=BAUD_M;      //BAUD_M
     28           
     29            UTX1IF=0;   //USART1 TXÖÐ¶Ï±êÖ¾³õÊ¼ÉèÎª0
   \                     ??CrossCallReturnLabel_0:
   \   00001C   C2EA         CLR     0xe8.2
     30          }
   \   00001E   02....       LJMP    ?BRET
   \   000021                REQUIRE PERCFG
   \   000021                REQUIRE P1SEL
   \   000021                REQUIRE P2SEL
   \   000021                REQUIRE _A_U1CSR
   \   000021                REQUIRE U1UCR
   \   000021                REQUIRE U1GCR
   \   000021                REQUIRE U1BAUD
   \   000021                REQUIRE _A_IRCON2

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   53FCE0       ANL     0xfc,#0xe0
   \   000003   741F         MOV     A,#0x1f
   \   000005   59           ANL     A,R1
   \   000006   42FC         ORL     0xfc,A
   \   000008   8AFA         MOV     0xfa,R2
   \   00000A   22           RET
     31          
     32          //SPIËÙÂÊÉè¶¨£¬²¨ÌØÂÊ=((256+BAUD_M)*2^BAUD_E/2^28)*Ê±ÖÓÆµÂÊ

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     33          void SPI1_SetSpeed(uint8 BAUD_E,uint8 BAUD_M)
   \                     SPI1_SetSpeed:
     34          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
     35            //Í¨Ñ¶ËÙÂÊÉè¶¨
     36            U1GCR&=0xE0;
   \   000000   12....       LCALL   ?Subroutine0 & 0xFFFF
     37            U1GCR|=BAUD_E&0x1F;  //BAUD_E
     38            U1BAUD=BAUD_M;      //BAUD_M
     39          }
   \                     ??CrossCallReturnLabel_1:
   \   000003   02....       LJMP    ?BRET
   \   000006                REQUIRE U1GCR
   \   000006                REQUIRE U1BAUD
     40          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     41          uint8 SPI1_ReadWriteByte(uint8 TxData)  //·¢ËÍÒ»¸ö×Ö½Ú²¢¶ÁÈ¡·µ»ØÊý¾Ý
   \                     SPI1_ReadWriteByte:
     42          {
   \   000000                REQUIRE ?V0
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0,R1
     43            uint16 retry=0;
     44            
     45            U1RX_BYTE=0;  //Çå³ý½ÓÊÕ±êÖ¾
   \   000007   C2FA         CLR     0xf8.2
     46            U1TX_BYTE=0;  //Çå³ý·¢ËÍ±êÖ¾
   \   000009   C2F9         CLR     0xf8.1
     47            
     48            U1DBUF=TxData;  //Ð´Êý¾Ýµ½·¢ËÍ»º³åÇø
   \   00000B   85..F9       MOV     0xf9,?V0
   \   00000E   7EFE         MOV     R6,#-0x2
   \   000010   7FFF         MOV     R7,#-0x1
     49            while(!U1TX_BYTE)  //µÈ´ý´«ËÍÍê³É
   \                     ??SPI1_ReadWriteByte_0:
   \   000012   A2F9         MOV     C,0xf8.1
   \   000014   4013         JC      ??SPI1_ReadWriteByte_1
     50            {
     51              retry++;
     52              WDT_Feed();  //Î¹¹·
   \   000016                ; Setup parameters for call to function WDT_Feed
   \   000016   12....       LCALL   ??WDT_Feed?relay     ; Banked call to: WDT_Feed
     53              if(retry>=0xFFFE) return 0xFC;  //·¢ËÍ³¬Ê±ÍË³ö
   \   000019   EE           MOV     A,R6
   \   00001A   24FF         ADD     A,#-0x1
   \   00001C   1E           DEC     R6
   \   00001D   EF           MOV     A,R7
   \   00001E   34FF         ADDC    A,#-0x1
   \   000020   FF           MOV     R7,A
   \   000021   EE           MOV     A,R6
   \   000022   4F           ORL     A,R7
   \   000023   70ED         JNZ     ??SPI1_ReadWriteByte_0
   \   000025   79FC         MOV     R1,#-0x4
   \   000027   8005         SJMP    ??SPI1_ReadWriteByte_2
     54            }
     55            U1TX_BYTE=0;  //Çå³ý·¢ËÍÍê³É±êÖ¾
   \                     ??SPI1_ReadWriteByte_1:
   \   000029   C2F9         CLR     0xf8.1
     56            
     57            //cc2530µÄUxRX_BYTEÎ»Ö»ÓÃ×÷UARTÄ£Ê½ºÍSPI´ÓÄ£Ê½£¬²»ÄÜÔÚSPIÖ÷Ä£Ê½ÖÐÍ¨¹ýËüÀ´ÅÐ¶ÏÊÇ·ñ½ÓÊÕÍê³É£¬
     58            //SPIÖ÷Ä£Ê½°ÑUxBUFF±ä³ÉÁËÒ»¸ödoubleBUFF£¬È»ºóÔÚ·¢ËÍµÄÍ¬Ê±£¬Ëü¾Í¿ªÆôÁË½ÓÊÕ£¬Í¬ÑùÊ¹ÓÃUxTX_TYTE×÷Îª½ÓÊÕÍê³É±êÖ¾Î»£¬
     59            //ÒòÎªËÙÂÊÊÇÆ¥ÅäµÄ£¬ËùÒÔ·¢ËÍÍê³ÉµÄÊ±ºò£¬½ÓÊÕÒ²¾ÍÍê³ÉÁË£¬Òò´Ë½ÓÊÕÊ±ÒªÏÈ·¢ËÍÎÞÐ§Êý¾ÝÌá¹©Ê±ÖÓ£¬µÈ´ýUxTX_BYTEÖÃÎ»·¢ËÍÍê³ÉºóÖ±½Ó¶ÁÈ¡UxDBUF±ã¿É
     60            
     61          /*  retry=0;
     62            while(!U1RX_BYTE)  //µÈ´ý½ÓÊÕÊý¾Ý»ò»ØÓ¦
     63            {
     64              retry++;
     65              if(retry>=0xFFFE)
     66              {
     67                return 0xFD;  //½ÓÊÕ³¬Ê±ÍË³ö
     68              }
     69            }*/
     70            
     71            return U1DBUF; //·µ»Ø½ÓÊÕÖµ
   \   00002B   E5F9         MOV     A,0xf9
   \   00002D   F9           MOV     R1,A
   \                     ??SPI1_ReadWriteByte_2:
   \   00002E   7F01         MOV     R7,#0x1
   \   000030   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000033                REQUIRE _A_U1CSR
   \   000033                REQUIRE U1DBUF
     72          }

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SPI1_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SPI1_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SPI1_SetSpeed?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SPI1_SetSpeed

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SPI1_ReadWriteByte?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SPI1_ReadWriteByte
     73          
     74          
     75          
     76          
     77          

   Maximum stack usage in bytes:

   XSTACK Function
   ------ --------
      0   SPI1_Init
      9   SPI1_ReadWriteByte
        9   -> WDT_Feed
      0   SPI1_SetSpeed


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       6  ??SPI1_Init?relay
       6  ??SPI1_ReadWriteByte?relay
       6  ??SPI1_SetSpeed?relay
      11  ?Subroutine0
       1  P1SEL
       1  P2SEL
       1  PERCFG
      33  SPI1_Init
      51  SPI1_ReadWriteByte
       6  SPI1_SetSpeed
       1  U1BAUD
       1  U1DBUF
       1  U1GCR
       1  U1UCR
       1  _A_IRCON2
       1  _A_U1CSR

 
 101 bytes in segment BANKED_CODE
  18 bytes in segment BANK_RELAYS
   9 bytes in segment SFR_AN
 
 119 bytes of CODE memory
   0 bytes of DATA memory (+ 9 bytes shared)

Errors: none
Warnings: none
