###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.30.1.41636 for 8051             27/May/2017  14:45:06 #
# Copyright 2004-2013 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#                                                                             #
#    Source file        =  E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\Source\hard #
#                          ware\adc.c                                         #
#    Command line       =  -f E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code201704 #
#                          12\code\Projects\zstack\Samples\SampleApp\CC2530DB #
#                          \..\..\..\Tools\CC2530DB\f8wCoord.cfg (-DCPU32MHZ  #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)    #
#                          -f E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code201704 #
#                          12\code\Projects\zstack\Samples\SampleApp\CC2530DB #
#                          \..\..\..\Tools\CC2530DB\f8wConfig.cfg             #
#                          (-DZIGBEEPRO -DSECURE=0 -DZG_SECURE_DYNAMIC=0      #
#                          -DREFLECTOR -DDEFAULT_CHANLIST=0x00000800          #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFF1                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ #
#                          ©ÌïÐ¡Æøºò\code20170412\code\Projects\zstack\Sample #
#                          s\SampleApp\Source\hardware\adc.c -D ZTOOL_P1 -D   #
#                          HAL_PA_LNA -D NV_INIT -D NV_RESTORE -D xMT_TASK    #
#                          -D xMT_SYS_FUNC -D xMT_ZDO_FUNC -D                 #
#                          xLCD_SUPPORTED=DEBUG -lC                           #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\Co #
#                          ordinatorEB\List\ -lA E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ© #
#                          ÌïÐ¡Æøºò\code20170412\code\Projects\zstack\Samples #
#                          \SampleApp\CC2530DB\CoordinatorEB\List\            #
#                          --diag_suppress Pe001,Pa010 -o                     #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\Co #
#                          ordinatorEB\Obj\ -e --no_code_motion --debug       #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 8 -I E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ #
#                          ©ÌïÐ¡Æøºò\code20170412\code\Projects\zstack\Sample #
#                          s\SampleApp\CC2530DB\ -I                           #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \Source\ -I E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\c #
#                          ode20170412\code\Projects\zstack\Samples\SampleApp #
#                          \CC2530DB\..\Source\hardware\ -I                   #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\ZMain\TI2530DB\ -I                          #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\ZMain\ -I E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æ #
#                          øºò\code20170412\code\Projects\zstack\Samples\Samp #
#                          leApp\CC2530DB\..\..\..\..\..\Components\hal\inclu #
#                          de\ -I E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20 #
#                          170412\code\Projects\zstack\Samples\SampleApp\CC25 #
#                          30DB\..\..\..\..\..\Components\hal\target\CC2530EB #
#                          \ -I E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code2017 #
#                          0412\code\Projects\zstack\Samples\SampleApp\CC2530 #
#                          DB\..\..\..\..\..\Components\mac\include\ -I       #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\mac\high_level\ -I         #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\mac\low_level\srf04\ -I    #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\mac\low_level\srf04\single #
#                          _chip\ -I E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\cod #
#                          e20170412\code\Projects\zstack\Samples\SampleApp\C #
#                          C2530DB\..\..\..\..\..\Components\mt\ -I           #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\osal\include\ -I           #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\services\saddr\ -I         #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\services\sdata\ -I         #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\af\ -I               #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\nwk\ -I              #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\sapi\ -I             #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\sec\ -I              #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\sys\ -I              #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\zdo\ -I              #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\zmac\ -I                   #
#                          E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\zmac\f8w\ -Ohz             #
#                          --require_prototypes                               #
#    List file          =  E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\Co #
#                          ordinatorEB\List\adc.lst                           #
#    Object file        =  E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\ #
#                          code\Projects\zstack\Samples\SampleApp\CC2530DB\Co #
#                          ordinatorEB\Obj\adc.r51                            #
#                                                                             #
#                                                                             #
###############################################################################

E:\¹¤×÷\ÉÏº£³¤Íû\ÏîÄ¿\ËÞÖÝÅ©ÌïÐ¡Æøºò\code20170412\code\Projects\zstack\Samples\SampleApp\Source\hardware\adc.c
      1          #include "adc.h"

   \                                 In  segment SFR_AN, at 0x90
   \   union <unnamed> volatile __sfr _A_P1
   \                     _A_P1:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xa0
   \   union <unnamed> volatile __sfr _A_P2
   \                     _A_P2:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf4
   \   unsigned char volatile __sfr P1SEL
   \                     P1SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfe
   \   unsigned char volatile __sfr P1DIR
   \                     P1DIR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xff
   \   unsigned char volatile __sfr P2DIR
   \                     P2DIR:
   \   000000                DS 1

   \                                 In  segment XDATA_ROM_C, align 1
   \   static float const __xdata_rom temp_cal_table[15]
   \                     temp_cal_table:
   \   000000   00000000     DD 0H
   \   000004   00000000     DD 0H
   \   000008   00000000     DD 0H
   \   00000C   00000000     DD 0H
   \   000010   00000000     DD 0H
   \   000014   00000000     DD 0H
   \   000018   00000000     DD 0H
   \   00001C   00000000     DD 0H
   \   000020   00000000     DD 0H
   \   000024   00000000     DD 0H
   \   000028   00000000     DD 0H
   \   00002C   00000000     DD 0H
   \   000030   00000000     DD 0H
   \   000034   00000000     DD 0H
   \   000038   00000000     DD 0H

   \                                 In  segment XDATA_ROM_C, align 1
   \   static float const __xdata_rom RTD_TAB_PT100[15]
   \                     RTD_TAB_PT100:
   \   000000   F6A89842     DD 4298A8F6H
   \   000004   B89EA042     DD 42A09EB8H
   \   000008   3D8AA842     DD 42A88A3DH
   \   00000C   A470B042     DD 42B070A4H
   \   000010   EC51B842     DD 42B851ECH
   \   000014   142EC042     DD 42C02E14H
   \   000018   0000C842     DD 42C80000H
   \   00001C   CDCCCF42     DD 42CFCCCDH
   \   000020   7B94D742     DD 42D7947BH
   \   000024   0A57DF42     DD 42DF570AH
   \   000028   7B14E742     DD 42E7147BH
   \   00002C   CDCCEE42     DD 42EECCCDH
   \   000030   E17AF642     DD 42F67AE1H
   \   000034   D723FE42     DD 42FE23D7H
   \   000038   D7E30243     DD 4302E3D7H
      2          #include "spi.h"
      3          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
      4          uint8 adc_state = START;  //AD²âÁ¿×´Ì¬
   \                     adc_state:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
      5              

   \                                 In  segment XDATA_Z, align 1, keep-with-next
      6          uint8 adc_done = FALSE;  //AD²âÁ¿Íê³É±êÖ¾
   \                     adc_done:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
      7          
      8          //ÄÚ²¿º¯ÊýÉùÃ÷
      9          void ADC_Reset(void);
     10          void ADC_WriteByte(uint8 cmd);
     11          uint8 ADC_ReadByte(void);
     12          void ADC_DisSelect(void);
     13          void ADC_Select(void);
     14          void ADC_SpeedSet(void);
     15          
     16          
     17          /******************************************************************************
     18           *
     19           *               ³õÊ¼»¯²¿·Ö
     20           *
     21           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     22          void ADC_Reset()  //¸´Î»AD7705
   \                     ADC_Reset:
     23          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
     24            ADC_RST=0;  
   \   000004   C294         CLR     0x90.4
     25            asm("NOP");
   \   000006   00           NOP
     26            asm("NOP");
   \   000007   00           NOP
     27            asm("NOP");
   \   000008   00           NOP
     28            ADC_RST=1;
   \   000009   D294         SETB    0x90.4
     29            MicroWait(5);
   \   00000B                ; Setup parameters for call to function Onboard_wait
   \   00000B   7A05         MOV     R2,#0x5
   \   00000D   7B00         MOV     R3,#0x0
   \   00000F   12....       LCALL   ??Onboard_wait?relay ; Banked call to: Onboard_wait
     30          }
   \   000012   80..         SJMP    ??Subroutine6_0
   \   000014                REQUIRE _A_P1

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine6_0:
   \   000000   D083         POP     DPH
   \   000002   D082         POP     DPL
   \   000004   02....       LJMP    ?BRET
     31           

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     32          void ADC_WriteByte(uint8 cmd)  //ÏòAD7705Ð´Ò»¸ö×Ö½ÚÃüÁî»òÊý¾Ý
   \                     ADC_WriteByte:
     33          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
     34            SPI1_ReadWriteByte(cmd);  //Ê¹ÓÃSPI1Ð´AD7705
   \   000005                ; Setup parameters for call to function SPI1_ReadWriteByte
   \   000005   12....       LCALL   ??SPI1_ReadWriteByte?relay; Banked call to: SPI1_ReadWriteByte
     35          }
   \   000008   7F01         MOV     R7,#0x1
   \   00000A   02....       LJMP    ?BANKED_LEAVE_XDATA
     36          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   79FF         MOV     R1,#-0x1
   \   000002   12....       LCALL   ??SPI1_ReadWriteByte?relay; Banked call to: SPI1_ReadWriteByte
   \   000005                REQUIRE ??Subroutine6_0
   \   000005                ; // Fall through to label ??Subroutine6_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     37          uint8 ADC_ReadByte(void)
   \                     ADC_ReadByte:
     38          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
     39            return SPI1_ReadWriteByte(0xFF); //SPI1Ð´¿ÕÖ¸Áî¶ÁÈ¡AD7705
   \   000004                ; Setup parameters for call to function SPI1_ReadWriteByte
   \   000004   80..         SJMP    ?Subroutine0
     40          }
     41          
     42          //È¡ÏûÑ¡Ôñ,ÊÍ·ÅSPI×ÜÏß

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     43          void ADC_DisSelect(void)
   \                     ADC_DisSelect:
     44          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
     45          	ADC_CS=1;
   \   000004   D2A1         SETB    0xa0.1
     46           	SPI1_ReadWriteByte(0xff);//Ìá¹©¶îÍâµÄ8¸öÊ±ÖÓ
   \   000006                ; Setup parameters for call to function SPI1_ReadWriteByte
   \   000006   80..         SJMP    ?Subroutine0
   \   000008                REQUIRE _A_P2
     47          }
     48          
     49          //Ñ¡Ôñad7705

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     50          void ADC_Select(void)
   \                     ADC_Select:
     51          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
     52          	ADC_CS=0;
   \   000004   C2A1         CLR     0xa0.1
     53                  SPI1_ReadWriteByte(0xff);//Ìá¹©¶îÍâµÄ8¸öÊ±ÖÓ
   \   000006                ; Setup parameters for call to function SPI1_ReadWriteByte
   \   000006   80..         SJMP    ?Subroutine0
   \   000008                REQUIRE _A_P2
     54          }
     55          
     56          //ad7705Ä¬ÈÏÍ¨ÐÅËÙÂÊÉè¶¨

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     57          void ADC_SpeedSet(void)
   \                     ADC_SpeedSet:
     58          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
     59            SPI1_SetSpeed(15,0);  //1M
   \   000004                ; Setup parameters for call to function SPI1_SetSpeed
   \   000004   7A00         MOV     R2,#0x0
   \   000006   790F         MOV     R1,#0xf
   \   000008   12....       LCALL   ??SPI1_SetSpeed?relay; Banked call to: SPI1_SetSpeed
     60          }
   \   00000B   80..         SJMP    ??Subroutine6_0
     61          
     62          /******************************************************************************
     63           *
     64           *  AD³õÊ¼»¯£¬³õÊ¼»¯SPI1£¬ÅäÖÃÆ¬Ñ¡ºÍ¸´Î»Òý½Å£¬
     65           *  ¸´Î»AD7705£¬ÉèÖÃ²ÉÑùÊ±ÖÓ£¬½øÐÐÉÏµç×ÔÐ£×¼µÈ²Ù×÷
     66           *
     67           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     68          void ADC_Init(void)  //AD7705³õÊ¼»¯£¬°üÀ¨³õÊ¼»¯SPI1ºÍ¸´Î»I/OÒý½ÅÅäÖÃ
   \                     ADC_Init:
     69          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
     70            SPI1_Init(15,0);  //SPI1³õÊ¼»¯£¬ËÙÂÊ1M
   \   000004                ; Setup parameters for call to function SPI1_Init
   \   000004   7A00         MOV     R2,#0x0
   \   000006   790F         MOV     R1,#0xf
   \   000008   12....       LCALL   ??SPI1_Init?relay    ; Banked call to: SPI1_Init
     71            
     72            P1SEL&=~(1<<0);   //P1_0Í¨ÓÃÊä³ö£¬×÷Îª¿ØÖÆ¹©µçÒý½Å
   \   00000B   53F4FE       ANL     0xf4,#0xfe
     73            P1DIR|=1<<0;
   \   00000E   43FE01       ORL     0xfe,#0x1
     74            ADC_CV=1;  //´ò¿ª¹©µç
   \   000011   D290         SETB    0x90.0
     75            
     76            P1SEL&=~(7<<1);  //P1_1-P1_3Í¨ÓÃÊä³ö£¬×÷Îª4051µÄÍ¨µÀÑ¡Ôñ
   \   000013   53F4F1       ANL     0xf4,#0xf1
     77            P1DIR|=7<<1;
   \   000016   43FE0E       ORL     0xfe,#0xe
     78            CH_SEL(0); //4051³õÊ¼Ñ¡ÔñÍ¨µÀ0
   \   000019   C291         CLR     0x90.1
   \   00001B   C292         CLR     0x90.2
   \   00001D   C293         CLR     0x90.3
     79            
     80            P1SEL&=~(1<<4);  //P1_4ÅäÖÃÎªÍ¨ÓÃÊä³ö¹¦ÄÜ£¬ÓÃ×÷AD7705¸´Î»¿ØÖÆÒý½Å
   \   00001F   53F4EF       ANL     0xf4,#0xef
     81            P1DIR|=1<<4;
   \   000022   43FE10       ORL     0xfe,#0x10
     82            ADC_RST=1; //P1_4³õÊ¼Îª1£¬²»¸´Î»
   \   000025   D294         SETB    0x90.4
     83            
     84            P2DIR|=3<<1;  //P2_1ºÍP2_2ÉèÖÃÎªÍ¨ÓÃÊä³ö£¬ÆäÖÐP2_1×÷ÎªAD7705Æ¬Ñ¡
   \   000027   43FF06       ORL     0xff,#0x6
     85            ADC_CS=1;  //²»Ñ¡Í¨AD7705
   \   00002A   D2A1         SETB    0xa0.1
     86            
     87            /*ADC_Reset();        //¸´Î»AD7705
     88            ADC_WriteByte(ADC_CLKWR_REG);  //·¢ËÍÐ´Ê±ÖÓ¼Ä´æÆ÷ÃüÁî
     89            ADC_WriteByte(ADC_RATE);   //Ê±ÖÓÅäÖÃ
     90            ADC_WriteByte(ADC_SETWR_REG);  //·¢ËÍÐ´ÉèÖÃ¼Ä´æÆ÷ÃüÁî
     91            ADC_WriteByte(ADC_CONTROL);  //ÉèÖÃ²âÁ¿²ÎÊý£¬×ÔÐ£×¼£¬µ¥¼«ÐÔ*/
     92          }
   \   00002C   80..         SJMP    ??Subroutine6_0
   \   00002E                REQUIRE P1SEL
   \   00002E                REQUIRE P1DIR
   \   00002E                REQUIRE _A_P1
   \   00002E                REQUIRE P2DIR
   \   00002E                REQUIRE _A_P2
     93          
     94          
     95          /******************************************************************************
     96           *
     97           *               ¶ÁÈ¡Í¨µÀµÄ16Î»×ª»»½á¹û
     98           *
     99           */
    100          //uint16 ADC_ReadData(uint8 channel)
    101          //{
    102          //  uint8 i,data;
    103          //  uint16 result=0;
    104          //  
    105          //  ADC_SpeedSet(); //ÉèÖÃAD7705Í¨ÐÅËÙÂÊ
    106          //  ADC_Select();  //Ñ¡ÔñAD7705
    107          //  
    108          //  for(i=0;i<200;i++)    //µÈ´ý×ª»»Íê³É
    109          //  {
    110          //    ADC_WriteByte(ADC_STATE_REG|channel);  //¶ÁÍ¨ÐÅ¼Ä´æÆ÷²é¿´DRDYÎ»£¬ÈôÎª0±íÊ¾×ª»»Íê³É£¬¿ÉÒÔ¶ÁÈ¡×ª»»Êý¾ÝÁË
    111          //    data=ADC_ReadByte();
    112          //    if(!(data&0x80))
    113          //      break;  //DRDYÎª0±íÊ¾×ª»»Íê³É
    114          //    else
    115          //    {
    116          //      MicroWait(1500);  //ÑÓÊ±1.5ms
    117          //      WDT_Feed(); //Î¹¹·£¬·ÀÖ¹¶ÁÈ¡Ê±¼ä¹ý³¤
    118          //      //HalUARTWrite(0,"w",strlen("w"));
    119          //    }
    120          //  }
    121          //  ADC_WriteByte(ADC_DATAR_REG|channel);   //¶Á16Î»Êý¾Ý¼Ä´æÆ÷»ñµÃ×ª»»½á¹û
    122          //  data=ADC_ReadByte();
    123          //  result=data;
    124          //  result<<=8;     //MSB first
    125          //  data=ADC_ReadByte();
    126          //  result|=data;
    127          //  
    128          //  ADC_DisSelect();  //È¡ÏûÆ¬Ñ¡£¬¿ÉÔÚad×ª»»ÆÚ¼äÊ¹ÓÃspiÉÏµÄÆäËüÆ÷¼þ£¬ÈçSD¿¨µÈ
    129          //  return result;
    130          //}
    131          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    132          uint16 ADC_ReadData(uint8 channel)
   \                     ADC_ReadData:
    133          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FF           MOV     R7,A
    134            uint8 i,data;
    135            uint16 result=0;
    136            
    137            ADC_SpeedSet(); //ÉèÖÃAD7705Í¨ÐÅËÙÂÊ
   \   000007                ; Setup parameters for call to function SPI1_SetSpeed
   \   000007   7A00         MOV     R2,#0x0
   \   000009   790F         MOV     R1,#0xf
   \   00000B   12....       LCALL   ??SPI1_SetSpeed?relay; Banked call to: SPI1_SetSpeed
    138            ADC_Select();  //Ñ¡ÔñAD7705
   \   00000E                ; Setup parameters for call to function ADC_Select
   \   00000E   12....       LCALL   ??ADC_Select?relay   ; Banked call to: ADC_Select
    139            
    140            for(i=0;i<200;i++)    //µÈ´ý×ª»»Íê³É
   \   000011   7EC8         MOV     R6,#-0x38
    141            {
    142              ADC_WriteByte(ADC_STATE_REG|channel);  //¶ÁÍ¨ÐÅ¼Ä´æÆ÷²é¿´DRDYÎ»£¬ÈôÎª0±íÊ¾×ª»»Íê³É£¬¿ÉÒÔ¶ÁÈ¡×ª»»Êý¾ÝÁË
   \                     ??ADC_ReadData_0:
   \   000013                ; Setup parameters for call to function SPI1_ReadWriteByte
   \   000013   7408         MOV     A,#0x8
   \   000015   4F           ORL     A,R7
   \   000016   F9           MOV     R1,A
   \   000017   12....       LCALL   ??SPI1_ReadWriteByte?relay; Banked call to: SPI1_ReadWriteByte
    143              data=ADC_ReadByte();
   \   00001A                ; Setup parameters for call to function SPI1_ReadWriteByte
   \   00001A   79FF         MOV     R1,#-0x1
   \   00001C   12....       LCALL   ??SPI1_ReadWriteByte?relay; Banked call to: SPI1_ReadWriteByte
   \   00001F   E9           MOV     A,R1
    144              if(!(data&0x80))
   \   000020   A2E7         MOV     C,0xE0 /* A   */.7
   \   000022   500E         JNC     ??ADC_ReadData_1
    145                break;  //DRDYÎª0±íÊ¾×ª»»Íê³É
    146              else
    147              {
    148                MicroWait(1500);  //ÑÓÊ±1.5ms
   \   000024                ; Setup parameters for call to function Onboard_wait
   \   000024   7ADC         MOV     R2,#-0x24
   \   000026   7B05         MOV     R3,#0x5
   \   000028   12....       LCALL   ??Onboard_wait?relay ; Banked call to: Onboard_wait
    149                WDT_Feed();  //Î¹¹·£¬·ÀÖ¹¶ÁÈ¡Ê±¼ä¹ý³¤
   \   00002B                ; Setup parameters for call to function WDT_Feed
   \   00002B   12....       LCALL   ??WDT_Feed?relay     ; Banked call to: WDT_Feed
    150                //HalUARTWrite(0,"w",strlen("w"));
    151              }
    152            }
   \   00002E   1E           DEC     R6
   \   00002F   EE           MOV     A,R6
   \   000030   70E1         JNZ     ??ADC_ReadData_0
    153            ADC_WriteByte(ADC_DATAR_REG|channel);   //¶Á16Î»Êý¾Ý¼Ä´æÆ÷»ñµÃ×ª»»½á¹û
   \                     ??ADC_ReadData_1:
   \   000032                ; Setup parameters for call to function SPI1_ReadWriteByte
   \   000032   7438         MOV     A,#0x38
   \   000034   4F           ORL     A,R7
   \   000035   F9           MOV     R1,A
   \   000036   12....       LCALL   ??SPI1_ReadWriteByte?relay; Banked call to: SPI1_ReadWriteByte
    154            data=ADC_ReadByte();
   \   000039                ; Setup parameters for call to function SPI1_ReadWriteByte
   \   000039   79FF         MOV     R1,#-0x1
   \   00003B   12....       LCALL   ??SPI1_ReadWriteByte?relay; Banked call to: SPI1_ReadWriteByte
   \   00003E   E9           MOV     A,R1
   \   00003F   FE           MOV     R6,A
    155            result=data;
    156            result<<=8;     //MSB first
    157            data=ADC_ReadByte();
   \   000040                ; Setup parameters for call to function SPI1_ReadWriteByte
   \   000040   79FF         MOV     R1,#-0x1
   \   000042   12....       LCALL   ??SPI1_ReadWriteByte?relay; Banked call to: SPI1_ReadWriteByte
   \   000045   E9           MOV     A,R1
   \   000046   F5..         MOV     ?V0,A
    158            result|=data;
    159            
    160            ADC_DisSelect();  //È¡ÏûÆ¬Ñ¡£¬¿ÉÔÚad×ª»»ÆÚ¼äÊ¹ÓÃspiÉÏµÄÆäËüÆ÷¼þ£¬ÈçSD¿¨µÈ
   \   000048                ; Setup parameters for call to function ADC_DisSelect
   \   000048   12....       LCALL   ??ADC_DisSelect?relay; Banked call to: ADC_DisSelect
    161            return result;
   \   00004B   EE           MOV     A,R6
   \   00004C   AA..         MOV     R2,?V0
   \   00004E   FB           MOV     R3,A
   \   00004F   7F02         MOV     R7,#0x2
   \   000051   02....       LJMP    ?BANKED_LEAVE_XDATA
    162          }
    163          /******************************************************************************
    164           *
    165           *  Æô¶¯Ò»´ÎAD×ª»»£¬
    166           *  switch_ch-4051¿ª¹ØÍ¨µÀÑ¡Ôñ£¨0-7£©
    167           *  channel-AD7705²âÁ¿Í¨µÀ£¨0»ò1£©£¬gain-±¾´Î²âÁ¿·Å´ó±¶ÊýÎª 2^gain£¬buffer-ÎªTRUEÊ¹ÓÃ»º³åÆ÷
    168           *
    169           */
    170          //void ADC_MeasureStart(uint8 switch_ch,uint8 channel,uint8 gain,uint8 buffer)
    171          //{
    172          //  //ADC_CV=1;  //´ò¿ª¹©µç
    173          //  ADC_SpeedSet(); //ÉèÖÃAD7705Í¨ÐÅËÙÂÊ
    174          //  ADC_Select();  //Ñ¡ÔñAD7705
    175          //  
    176          //  CH_SEL(switch_ch);  //¿ª¹ØÍ¨µÀÑ¡Ôñ
    177          //  //MicroWait(10000);  //µÈ´ý4051ÎÈ¶¨
    178          //  //WDT_Feed(); //Î¹¹·
    179          //  ADC_Reset();        //¸´Î»AD7705
    180          //  ADC_WriteByte(ADC_CLKWR_REG|channel);  //·¢ËÍÐ´Ê±ÖÓ¼Ä´æÆ÷ÃüÁî£¬²¢ÉèÖÃ²âÁ¿Í¨µÀ
    181          //  ADC_WriteByte(ADC_RATE);   //Ê±ÖÓÅäÖÃ
    182          //  ADC_WriteByte(ADC_SETWR_REG|channel);  //·¢ËÍÐ´ÉèÖÃ¼Ä´æÆ÷ÃüÁî
    183          //  ADC_WriteByte(ADC_CONTROL|(gain<<3)|(buffer<<1));  //ÉèÖÃ²âÁ¿²ÎÊý£¬×ÔÐ£×¼£¬ÔöÒæ£¬ÊÇ·ñÐèÒª»º³åÆ÷
    184          //  
    185          //  ADC_DisSelect(); //È¡ÏûÆ¬Ñ¡£¬¿ÉÔÚad×ª»»ÆÚ¼äÊ¹ÓÃspiÉÏµÄÆäËüÆ÷¼þ£¬ÈçSD¿¨µÈ
    186          //}
    187          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    188          void ADC_MeasureStart(uint8 switch_ch,uint8 channel,uint8 gain,uint8 buffer)
   \                     ADC_MeasureStart:
    189          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000   74F3         MOV     A,#-0xd
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 13
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
   \   000007   EA           MOV     A,R2
   \   000008   FF           MOV     R7,A
   \   000009   8B..         MOV     ?V0,R3
   \   00000B   8C..         MOV     ?V1,R4
    190            ADC_CV=1;  //´ò¿ª¹©µç
   \   00000D   D290         SETB    0x90.0
    191            ADC_SpeedSet(); //ÉèÖÃAD7705Í¨ÐÅËÙÂÊ
   \   00000F                ; Setup parameters for call to function SPI1_SetSpeed
   \   00000F   7A00         MOV     R2,#0x0
   \   000011   790F         MOV     R1,#0xf
   \   000013   12....       LCALL   ??SPI1_SetSpeed?relay; Banked call to: SPI1_SetSpeed
    192            ADC_Select();  //Ñ¡ÔñAD7705
   \   000016                ; Setup parameters for call to function ADC_Select
   \   000016   12....       LCALL   ??ADC_Select?relay   ; Banked call to: ADC_Select
    193            
    194            CH_SEL(switch_ch);  //¿ª¹ØÍ¨µÀÑ¡Ôñ
   \   000019   EE           MOV     A,R6
   \   00001A   A2E0         MOV     C,0xE0 /* A   */.0
   \   00001C   A2E0         MOV     C,0xE0 /* A   */.0
   \   00001E   9291         MOV     0x90.1,C
   \   000020   A2E1         MOV     C,0xE0 /* A   */.1
   \   000022   A2E1         MOV     C,0xE0 /* A   */.1
   \   000024   9292         MOV     0x90.2,C
   \   000026   A2E2         MOV     C,0xE0 /* A   */.2
   \   000028   A2E2         MOV     C,0xE0 /* A   */.2
   \   00002A   9293         MOV     0x90.3,C
    195            /*MicroWait(5000);*/  //µÈ´ý4051ÎÈ¶¨  //È¡Ïû£¬ÓÐÊ±ºò»áÔì³É±ê×¼µç×è²âÁ¿Öµ´íÎó
    196          //  MicroWait(3000);
    197            ADC_Reset();        //¸´Î»AD7705
   \   00002C                ; Setup parameters for call to function ADC_Reset
   \   00002C   12....       LCALL   ??ADC_Reset?relay    ; Banked call to: ADC_Reset
    198            ADC_WriteByte(ADC_CLKWR_REG|channel);  //·¢ËÍÐ´Ê±ÖÓ¼Ä´æÆ÷ÃüÁî£¬²¢ÉèÖÃ²âÁ¿Í¨µÀ
   \   00002F                ; Setup parameters for call to function SPI1_ReadWriteByte
   \   00002F   7420         MOV     A,#0x20
   \   000031   4F           ORL     A,R7
   \   000032   F9           MOV     R1,A
   \   000033   12....       LCALL   ??SPI1_ReadWriteByte?relay; Banked call to: SPI1_ReadWriteByte
    199            ADC_WriteByte(ADC_RATE);   //Ê±ÖÓÅäÖÃ
   \   000036                ; Setup parameters for call to function SPI1_ReadWriteByte
   \   000036   790C         MOV     R1,#0xc
   \   000038   12....       LCALL   ??SPI1_ReadWriteByte?relay; Banked call to: SPI1_ReadWriteByte
    200            ADC_WriteByte(ADC_SETWR_REG|channel);  //·¢ËÍÐ´ÉèÖÃ¼Ä´æÆ÷ÃüÁî
   \   00003B                ; Setup parameters for call to function SPI1_ReadWriteByte
   \   00003B   7410         MOV     A,#0x10
   \   00003D   4F           ORL     A,R7
   \   00003E   F9           MOV     R1,A
   \   00003F   12....       LCALL   ??SPI1_ReadWriteByte?relay; Banked call to: SPI1_ReadWriteByte
    201            ADC_WriteByte(ADC_CONTROL|(gain<<3)|(buffer<<1));  //ÉèÖÃ²âÁ¿²ÎÊý£¬×ÔÐ£×¼£¬ÔöÒæ£¬ÊÇ·ñÐèÒª»º³åÆ÷
   \   000042                ; Setup parameters for call to function SPI1_ReadWriteByte
   \   000042   E5..         MOV     A,?V1
   \   000044   C3           CLR     C
   \   000045   33           RLC     A
   \   000046   F8           MOV     R0,A
   \   000047   E5..         MOV     A,?V0
   \   000049   33           RLC     A
   \   00004A   33           RLC     A
   \   00004B   33           RLC     A
   \   00004C   54F8         ANL     A,#0xf8
   \   00004E   48           ORL     A,R0
   \   00004F   4444         ORL     A,#0x44
   \   000051   F9           MOV     R1,A
   \   000052   12....       LCALL   ??SPI1_ReadWriteByte?relay; Banked call to: SPI1_ReadWriteByte
    202            
    203            ADC_DisSelect(); //È¡ÏûÆ¬Ñ¡£¬¿ÉÔÚad×ª»»ÆÚ¼äÊ¹ÓÃspiÉÏµÄÆäËüÆ÷¼þ£¬ÈçSD¿¨µÈ
   \   000055                ; Setup parameters for call to function ADC_DisSelect
   \   000055   12....       LCALL   ??ADC_DisSelect?relay; Banked call to: ADC_DisSelect
    204          }
   \   000058   7F05         MOV     R7,#0x5
   \   00005A   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   00005D                REQUIRE _A_P1
    205          
    206          
    207          
    208          /******************************************************************************
    209           *
    210           *               ´«¸ÐÆ÷²âÁ¿¼ÆËã²¿·Ö
    211           *
    212           */
    213          //¼ÆËã·øÉäÖµ,µçÑ¹µ¥Î»Îªmv

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    214          float CalculateRadiation(float voltage,float RadCoefficient)
   \                     CalculateRadiation:
    215          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 4
   \   000005   74FC         MOV     A,#-0x4
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   12....       LCALL   ?Subroutine3 & 0xFFFF
    216            voltage*=1000;
   \                     ??CrossCallReturnLabel_0:
   \   000013   85..82       MOV     DPL,?XSP + 0
   \   000016   85..83       MOV     DPH,?XSP + 1
   \   000019   78..         MOV     R0,#?V0
   \   00001B   12....       LCALL   ?L_MOV_X
   \   00001E   90....       MOV     DPTR,#__Constant_447a0000
   \   000021   78..         MOV     R0,#?V4
   \   000023   12....       LCALL   ?L_MOV_X
   \   000026   78..         MOV     R0,#?V0
   \   000028   79..         MOV     R1,#?V4
   \   00002A   12....       LCALL   ?FLT_MUL
   \   00002D   85..82       MOV     DPL,?XSP + 0
   \   000030   85..83       MOV     DPH,?XSP + 1
   \   000033   78..         MOV     R0,#?V0
   \   000035   12....       LCALL   ?L_MOV_TO_X
    217            
    218            if(RadCoefficient<=0)
   \   000038   7414         MOV     A,#0x14
   \   00003A   12....       LCALL   ?XSTACK_DISP0_8
   \   00003D   78..         MOV     R0,#?V0
   \   00003F   12....       LCALL   ?L_MOV_X
   \   000042   90....       MOV     DPTR,#__Constant_1
   \   000045   78..         MOV     R0,#?V4
   \   000047   12....       LCALL   ?L_MOV_X
   \   00004A   78..         MOV     R0,#?V0
   \   00004C   79..         MOV     R1,#?V4
   \   00004E   12....       LCALL   ?FLT_LT
   \   000051   5011         JNC     ??CalculateRadiation_0
    219            {
    220              RadCoefficient=10;
   \   000053   7414         MOV     A,#0x14
   \   000055   12....       LCALL   ?XSTACK_DISP0_8
   \   000058   E4           CLR     A
   \   000059   F0           MOVX    @DPTR,A
   \   00005A   A3           INC     DPTR
   \   00005B   F0           MOVX    @DPTR,A
   \   00005C   A3           INC     DPTR
   \   00005D   7420         MOV     A,#0x20
   \   00005F   F0           MOVX    @DPTR,A
   \   000060   A3           INC     DPTR
   \   000061   7441         MOV     A,#0x41
   \   000063   F0           MOVX    @DPTR,A
    221            }
    222            
    223            voltage/=RadCoefficient;
   \                     ??CalculateRadiation_0:
   \   000064   85..82       MOV     DPL,?XSP + 0
   \   000067   85..83       MOV     DPH,?XSP + 1
   \   00006A   78..         MOV     R0,#?V0
   \   00006C   12....       LCALL   ?L_MOV_X
   \   00006F   7414         MOV     A,#0x14
   \   000071   12....       LCALL   ?XSTACK_DISP0_8
   \   000074   78..         MOV     R0,#?V4
   \   000076   12....       LCALL   ?L_MOV_X
   \   000079   78..         MOV     R0,#?V0
   \   00007B   79..         MOV     R1,#?V4
   \   00007D   12....       LCALL   ?FLT_DIV
   \   000080   85..82       MOV     DPL,?XSP + 0
   \   000083   85..83       MOV     DPH,?XSP + 1
   \   000086   78..         MOV     R0,#?V0
   \   000088   12....       LCALL   ?L_MOV_TO_X
    224            
    225            voltage=MAX(voltage,0.0);
   \   00008B   85..82       MOV     DPL,?XSP + 0
   \   00008E   85..83       MOV     DPH,?XSP + 1
   \   000091   78..         MOV     R0,#?V0
   \   000093   12....       LCALL   ?L_MOV_X
   \   000096   90....       MOV     DPTR,#__Constant_0
   \   000099   78..         MOV     R0,#?V4
   \   00009B   12....       LCALL   ?L_MOV_X
   \   00009E   78..         MOV     R0,#?V0
   \   0000A0   79..         MOV     R1,#?V4
   \   0000A2   12....       LCALL   ?FLT_LT
   \   0000A5   85..82       MOV     DPL,?XSP + 0
   \   0000A8   85..83       MOV     DPH,?XSP + 1
   \   0000AB   5009         JNC     ??CalculateRadiation_1
   \   0000AD   E4           CLR     A
   \   0000AE   F0           MOVX    @DPTR,A
   \   0000AF   A3           INC     DPTR
   \   0000B0   F0           MOVX    @DPTR,A
   \   0000B1   A3           INC     DPTR
   \   0000B2   F0           MOVX    @DPTR,A
   \   0000B3   A3           INC     DPTR
   \   0000B4   8029         SJMP    ??CalculateRadiation_2
    226            voltage=MIN(voltage,5000.0);
   \                     ??CalculateRadiation_1:
   \   0000B6   78..         MOV     R0,#?V0
   \   0000B8   12....       LCALL   ?L_MOV_X
   \   0000BB   90....       MOV     DPTR,#__Constant_459c4000
   \   0000BE   78..         MOV     R0,#?V4
   \   0000C0   12....       LCALL   ?L_MOV_X
   \   0000C3   78..         MOV     R0,#?V0
   \   0000C5   79..         MOV     R1,#?V4
   \   0000C7   12....       LCALL   ?FLT_LT
   \   0000CA   4014         JC      ??CalculateRadiation_3
   \   0000CC   85..82       MOV     DPL,?XSP + 0
   \   0000CF   85..83       MOV     DPH,?XSP + 1
   \   0000D2   E4           CLR     A
   \   0000D3   F0           MOVX    @DPTR,A
   \   0000D4   A3           INC     DPTR
   \   0000D5   7440         MOV     A,#0x40
   \   0000D7   F0           MOVX    @DPTR,A
   \   0000D8   A3           INC     DPTR
   \   0000D9   749C         MOV     A,#-0x64
   \   0000DB   F0           MOVX    @DPTR,A
   \   0000DC   A3           INC     DPTR
   \   0000DD   7445         MOV     A,#0x45
   \                     ??CalculateRadiation_2:
   \   0000DF   F0           MOVX    @DPTR,A
    227            
    228            return voltage;
   \                     ??CalculateRadiation_3:
   \   0000E0   85..82       MOV     DPL,?XSP + 0
   \   0000E3   85..83       MOV     DPH,?XSP + 1
   \   0000E6   12....       LCALL   ?XLOAD_R2345
   \   0000E9   7404         MOV     A,#0x4
   \   0000EB                REQUIRE ?Subroutine1
   \   0000EB                ; // Fall through to label ?Subroutine1
    229          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F08         MOV     R7,#0x8
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   EA           MOV     A,R2
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   EB           MOV     A,R3
   \   000004   F0           MOVX    @DPTR,A
   \   000005   A3           INC     DPTR
   \   000006   EC           MOV     A,R4
   \   000007   F0           MOVX    @DPTR,A
   \   000008   A3           INC     DPTR
   \   000009   ED           MOV     A,R5
   \   00000A   F0           MOVX    @DPTR,A
   \   00000B   22           RET
    230          
    231          //¼ÆËãPT100ÎÂ¶ÈÖµ

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    232          float CalculateTemp(float fr)
   \                     CalculateTemp:
    233          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 8
   \   000005   74F8         MOV     A,#-0x8
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   7404         MOV     A,#0x4
   \   00000C   12....       LCALL   ?XSTACK_DISP0_8
   \   00000F   12....       LCALL   ?Subroutine3 & 0xFFFF
    234          	float fTem;
    235          	float fL;
    236          	float fH;
    237                  float cal=0;  //ÐÞÕýÖµ
    238          	int iTem;
    239          	uint8 cbottom,ctop;
    240          	uint8 i;
    241                  
    242                  cal=temp_cal_table[0]/100;
    243          	if(fr<RTD_TAB_PT100[0]+cal)   //Ìí¼ÓÐÞÕýÖµ
   \                     ??CrossCallReturnLabel_1:
   \   000012   7404         MOV     A,#0x4
   \   000014   12....       LCALL   ?XSTACK_DISP0_8
   \   000017   78..         MOV     R0,#?V0
   \   000019   12....       LCALL   ?L_MOV_X
   \   00001C   90....       MOV     DPTR,#__Constant_4298a8f6
   \   00001F   78..         MOV     R0,#?V4
   \   000021   12....       LCALL   ?L_MOV_X
   \   000024   78..         MOV     R0,#?V0
   \   000026   79..         MOV     R1,#?V4
   \   000028   12....       LCALL   ?FLT_LT
   \   00002B   500B         JNC     ??CalculateTemp_0
    244          	{
    245          		return -60.0;
   \   00002D   7A00         MOV     R2,#0x0
   \   00002F   7B00         MOV     R3,#0x0
   \   000031   7C70         MOV     R4,#0x70
   \   000033   7DC2         MOV     R5,#-0x3e
   \   000035   02....       LJMP    ??CalculateTemp_1 & 0xFFFF
    246          	}
    247                  cal=temp_cal_table[14]/100;
    248          	if(fr>RTD_TAB_PT100[14]+cal)   //Ìí¼ÓÐÞÕýÖµ
   \                     ??CalculateTemp_0:
   \   000038   7404         MOV     A,#0x4
   \   00003A   12....       LCALL   ?XSTACK_DISP0_8
   \   00003D   78..         MOV     R0,#?V0
   \   00003F   12....       LCALL   ?L_MOV_X
   \   000042   90....       MOV     DPTR,#__Constant_4302e3d8
   \   000045   78..         MOV     R0,#?V4
   \   000047   12....       LCALL   ?L_MOV_X
   \   00004A   78..         MOV     R0,#?V0
   \   00004C   79..         MOV     R1,#?V4
   \   00004E   12....       LCALL   ?FLT_GE
   \   000051   500B         JNC     ??CalculateTemp_2
    249          	{
    250          		return 80.0;
   \   000053   7A00         MOV     R2,#0x0
   \   000055   7B00         MOV     R3,#0x0
   \   000057   7CA0         MOV     R4,#-0x60
   \   000059   7D42         MOV     R5,#0x42
   \   00005B   02....       LJMP    ??CalculateTemp_1 & 0xFFFF
    251          	}
    252          	cbottom=0;
   \                     ??CalculateTemp_2:
   \   00005E   7E00         MOV     R6,#0x0
    253          	ctop=14;
   \   000060   7F0E         MOV     R7,#0xe
    254          	for(i=7;(ctop-cbottom)!=1;)
   \   000062   7C07         MOV     R4,#0x7
   \   000064   8011         SJMP    ??CalculateTemp_3
    255          	{
    256                          cal=temp_cal_table[i]/100;  //Ìí¼ÓÐÞÕýÖµ
    257          		if(fr<RTD_TAB_PT100[i]+cal)
    258          		{
    259          			ctop=i;
   \                     ??CalculateTemp_4:
   \   000066   EC           MOV     A,R4
   \   000067   FF           MOV     R7,A
    260          			i=(ctop+cbottom)/2;
   \                     ??CalculateTemp_5:
   \   000068   2E           ADD     A,R6
   \   000069   F8           MOV     R0,A
   \   00006A   E4           CLR     A
   \   00006B   3400         ADDC    A,#0x0
   \   00006D   F9           MOV     R1,A
   \   00006E   7A02         MOV     R2,#0x2
   \   000070   7B00         MOV     R3,#0x0
   \   000072   12....       LCALL   ?S_DIV_MOD
   \   000075   E8           MOV     A,R0
   \   000076   FC           MOV     R4,A
    261          		}
   \                     ??CalculateTemp_3:
   \   000077   8F..         MOV     ?V2,R7
   \   000079   8E..         MOV     ?V0,R6
   \   00007B   E5..         MOV     A,?V2
   \   00007D   C3           CLR     C
   \   00007E   95..         SUBB    A,?V0
   \   000080   F8           MOV     R0,A
   \   000081   95E0         SUBB    A,0xE0 /* A   */
   \   000083   F9           MOV     R1,A
   \   000084   7401         MOV     A,#0x1
   \   000086   68           XRL     A,R0
   \   000087   7001         JNZ     ??CalculateTemp_6
   \   000089   E9           MOV     A,R1
   \                     ??CalculateTemp_6:
   \   00008A   7003         JNZ     $+5
   \   00008C   02....       LJMP    ??CalculateTemp_7 & 0xFFFF
   \   00008F   8C..         MOV     ?V0,R4
   \   000091   75..00       MOV     ?V1,#0x0
   \   000094   7402         MOV     A,#0x2
   \   000096   78..         MOV     R0,#?V0
   \   000098   12....       LCALL   ?S_SHL
   \   00009B   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   00009E   12....       LCALL   ?L_MOV_X
   \   0000A1   90....       MOV     DPTR,#__Constant_42c80000
   \   0000A4   78..         MOV     R0,#?V0
   \   0000A6   12....       LCALL   ?L_MOV_X
   \   0000A9   78..         MOV     R0,#?V4
   \   0000AB   79..         MOV     R1,#?V0
   \   0000AD   12....       LCALL   ?FLT_DIV
   \   0000B0   85....       MOV     ?V0,?V4
   \   0000B3   85....       MOV     ?V1,?V5
   \   0000B6   85....       MOV     ?V2,?V6
   \   0000B9   85....       MOV     ?V3,?V7
   \   0000BC   85..82       MOV     DPL,?XSP + 0
   \   0000BF   85..83       MOV     DPH,?XSP + 1
   \   0000C2   78..         MOV     R0,#?V0
   \   0000C4   12....       LCALL   ?L_MOV_TO_X
   \   0000C7   7404         MOV     A,#0x4
   \   0000C9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000CC   78..         MOV     R0,#?V0
   \   0000CE   12....       LCALL   ?L_MOV_X
   \   0000D1   C0..         PUSH    ?V0
   \   0000D3   C0..         PUSH    ?V1
   \   0000D5   C0..         PUSH    ?V2
   \   0000D7   C0..         PUSH    ?V3
   \   0000D9   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   0000DC   78..         MOV     R0,#?V4
   \   0000DE   12....       LCALL   ?L_MOV_X
   \   0000E1   85..82       MOV     DPL,?XSP + 0
   \   0000E4   85..83       MOV     DPH,?XSP + 1
   \   0000E7   78..         MOV     R0,#?V0
   \   0000E9   12....       LCALL   ?L_MOV_X
   \   0000EC   78..         MOV     R0,#?V4
   \   0000EE   79..         MOV     R1,#?V0
   \   0000F0   12....       LCALL   ?FLT_ADD
   \   0000F3   D0..         POP     ?V3
   \   0000F5   D0..         POP     ?V2
   \   0000F7   D0..         POP     ?V1
   \   0000F9   D0..         POP     ?V0
   \   0000FB   78..         MOV     R0,#?V0
   \   0000FD   79..         MOV     R1,#?V4
   \   0000FF   12....       LCALL   ?FLT_LT
   \   000102   5003         JNC     $+5
   \   000104   02....       LJMP    ??CalculateTemp_4 & 0xFFFF
    262          		else if(fr>RTD_TAB_PT100[i]+cal)
   \   000107   8C..         MOV     ?V0,R4
   \   000109   75..00       MOV     ?V1,#0x0
   \   00010C   7402         MOV     A,#0x2
   \   00010E   78..         MOV     R0,#?V0
   \   000110   12....       LCALL   ?S_SHL
   \   000113   74..         MOV     A,#RTD_TAB_PT100 & 0xff
   \   000115   2A           ADD     A,R2
   \   000116   F582         MOV     DPL,A
   \   000118   74..         MOV     A,#(RTD_TAB_PT100 >> 8) & 0xff
   \   00011A   35..         ADDC    A,?V1
   \   00011C   F583         MOV     DPH,A
   \   00011E   78..         MOV     R0,#?V0
   \   000120   12....       LCALL   ?L_MOV_X
   \   000123   85..82       MOV     DPL,?XSP + 0
   \   000126   85..83       MOV     DPH,?XSP + 1
   \   000129   78..         MOV     R0,#?V4
   \   00012B   12....       LCALL   ?L_MOV_X
   \   00012E   78..         MOV     R0,#?V0
   \   000130   79..         MOV     R1,#?V4
   \   000132   12....       LCALL   ?FLT_ADD
   \   000135   7404         MOV     A,#0x4
   \   000137   12....       LCALL   ?XSTACK_DISP0_8
   \   00013A   78..         MOV     R0,#?V4
   \   00013C   12....       LCALL   ?L_MOV_X
   \   00013F   78..         MOV     R0,#?V0
   \   000141   79..         MOV     R1,#?V4
   \   000143   12....       LCALL   ?FLT_LT
   \   000146   EC           MOV     A,R4
   \   000147   5008         JNC     ??CalculateTemp_8
    263          		{
    264          			cbottom=i;
   \   000149   FE           MOV     R6,A
    265          			i=(ctop+cbottom)/2;
   \   00014A   8F..         MOV     ?V0,R7
   \   00014C   E5..         MOV     A,?V0
   \   00014E   02....       LJMP    ??CalculateTemp_5 & 0xFFFF
    266          		}
    267          		else
    268          		{
    269          			iTem=(unsigned int)i*10-60;
    270          			fTem=(float)iTem;
    271          			return fTem;
   \                     ??CalculateTemp_8:
   \   000151   75F00A       MOV     B,#0xa
   \   000154   A4           MUL     AB
   \   000155   24C4         ADD     A,#-0x3c
   \   000157   F5..         MOV     ?V0,A
   \   000159   E5F0         MOV     A,B
   \   00015B   34FF         ADDC    A,#-0x1
   \   00015D   F5..         MOV     ?V1,A
   \   00015F   33           RLC     A
   \   000160   95E0         SUBB    A,0xE0 /* A   */
   \   000162   F5..         MOV     ?V2,A
   \   000164   F5..         MOV     ?V3,A
   \   000166   78..         MOV     R0,#?V0
   \   000168   12....       LCALL   ?L_TO_FLT
   \   00016B   02....       LJMP    ??CalculateTemp_9 & 0xFFFF
    272          		}
    273          	}
   \                     ??CalculateTemp_7:
   \   00016E   75..00       MOV     ?V1,#0x0
   \   000171   7402         MOV     A,#0x2
   \   000173   78..         MOV     R0,#?V0
   \   000175   12....       LCALL   ?S_SHL
   \   000178   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   00017B   12....       LCALL   ?L_MOV_X
   \   00017E   90....       MOV     DPTR,#__Constant_42c80000
   \   000181   78..         MOV     R0,#?V0
   \   000183   12....       LCALL   ?L_MOV_X
   \   000186   78..         MOV     R0,#?V4
   \   000188   79..         MOV     R1,#?V0
   \   00018A   12....       LCALL   ?FLT_DIV
   \   00018D   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   000190   12....       LCALL   ?L_MOV_X
   \   000193   78..         MOV     R0,#?V4
   \   000195   79..         MOV     R1,#?V0
   \   000197   12....       LCALL   ?FLT_ADD
   \   00019A   85....       MOV     ?V0,?V4
   \   00019D   85....       MOV     ?V1,?V5
   \   0001A0   85....       MOV     ?V2,?V6
   \   0001A3   85....       MOV     ?V3,?V7
   \   0001A6   85..82       MOV     DPL,?XSP + 0
   \   0001A9   85..83       MOV     DPH,?XSP + 1
   \   0001AC   78..         MOV     R0,#?V0
   \   0001AE   12....       LCALL   ?L_MOV_TO_X
   \   0001B1   8F..         MOV     ?V0,R7
   \   0001B3   75..00       MOV     ?V1,#0x0
   \   0001B6   7402         MOV     A,#0x2
   \   0001B8   78..         MOV     R0,#?V0
   \   0001BA   12....       LCALL   ?S_SHL
   \   0001BD   AA..         MOV     R2,?V0
   \   0001BF   AB..         MOV     R3,?V1
   \   0001C1   7404         MOV     A,#0x4
   \   0001C3   12....       LCALL   ?XSTACK_DISP0_8
   \   0001C6   78..         MOV     R0,#?V0
   \   0001C8   12....       LCALL   ?L_MOV_X
   \   0001CB   85..82       MOV     DPL,?XSP + 0
   \   0001CE   85..83       MOV     DPH,?XSP + 1
   \   0001D1   78..         MOV     R0,#?V4
   \   0001D3   12....       LCALL   ?L_MOV_X
   \   0001D6   78..         MOV     R0,#?V0
   \   0001D8   79..         MOV     R1,#?V4
   \   0001DA   12....       LCALL   ?FLT_SUB
   \   0001DD   90....       MOV     DPTR,#__Constant_41200000
   \   0001E0   78..         MOV     R0,#?V4
   \   0001E2   12....       LCALL   ?L_MOV_X
   \   0001E5   78..         MOV     R0,#?V0
   \   0001E7   79..         MOV     R1,#?V4
   \   0001E9   12....       LCALL   ?FLT_MUL
   \   0001EC   C0..         PUSH    ?V0
   \   0001EE   C0..         PUSH    ?V1
   \   0001F0   C0..         PUSH    ?V2
   \   0001F2   C0..         PUSH    ?V3
   \   0001F4   12....       LCALL   ??Subroutine7_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   0001F7   12....       LCALL   ?L_MOV_X
   \   0001FA   90....       MOV     DPTR,#__Constant_42c80000
   \   0001FD   78..         MOV     R0,#?V0
   \   0001FF   12....       LCALL   ?L_MOV_X
   \   000202   78..         MOV     R0,#?V4
   \   000204   79..         MOV     R1,#?V0
   \   000206   12....       LCALL   ?FLT_DIV
   \   000209   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   00020C   12....       LCALL   ?L_MOV_X
   \   00020F   78..         MOV     R0,#?V4
   \   000211   79..         MOV     R1,#?V0
   \   000213   12....       LCALL   ?FLT_ADD
   \   000216   85..82       MOV     DPL,?XSP + 0
   \   000219   85..83       MOV     DPH,?XSP + 1
   \   00021C   78..         MOV     R0,#?V0
   \   00021E   12....       LCALL   ?L_MOV_X
   \   000221   78..         MOV     R0,#?V4
   \   000223   79..         MOV     R1,#?V0
   \   000225   12....       LCALL   ?FLT_SUB
   \   000228   D0..         POP     ?V3
   \   00022A   D0..         POP     ?V2
   \   00022C   D0..         POP     ?V1
   \   00022E   D0..         POP     ?V0
   \   000230   78..         MOV     R0,#?V0
   \   000232   79..         MOV     R1,#?V4
   \   000234   12....       LCALL   ?FLT_DIV
   \   000237   EC           MOV     A,R4
   \   000238   75F00A       MOV     B,#0xa
   \   00023B   A4           MUL     AB
   \   00023C   24C4         ADD     A,#-0x3c
   \   00023E   F5..         MOV     ?V4,A
   \   000240   E5F0         MOV     A,B
   \   000242   34FF         ADDC    A,#-0x1
   \   000244   F5..         MOV     ?V5,A
   \   000246   33           RLC     A
   \   000247   95E0         SUBB    A,0xE0 /* A   */
   \   000249   F5..         MOV     ?V6,A
   \   00024B   F5..         MOV     ?V7,A
   \   00024D   78..         MOV     R0,#?V4
   \   00024F   12....       LCALL   ?L_TO_FLT
   \   000252   78..         MOV     R0,#?V0
   \   000254   79..         MOV     R1,#?V4
   \   000256   12....       LCALL   ?FLT_ADD
   \                     ??CalculateTemp_9:
   \   000259   AA..         MOV     R2,?V0
   \   00025B   AB..         MOV     R3,?V1
   \   00025D   AC..         MOV     R4,?V2
   \   00025F   AD..         MOV     R5,?V3
   \                     ??CalculateTemp_1:
   \   000261   7408         MOV     A,#0x8
   \   000263   02....       LJMP    ?Subroutine1 & 0xFFFF
    274          	iTem=(int)i*10-60;
    275          	fL=RTD_TAB_PT100[cbottom]+temp_cal_table[cbottom]/100;
    276          	fH=RTD_TAB_PT100[ctop]+temp_cal_table[ctop]/100;
    277          	fTem=(((fr-fL)*10)/(fH-fL))+iTem;
    278          	return fTem;
    279          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   000003   78..         MOV     R0,#?V0
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   74..         MOV     A,#RTD_TAB_PT100 & 0xff
   \   000002   2A           ADD     A,R2
   \   000003   F582         MOV     DPL,A
   \   000005   74..         MOV     A,#(RTD_TAB_PT100 >> 8) & 0xff
   \   000007   3B           ADDC    A,R3
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   AA..         MOV     R2,?V0
   \   000002   AB..         MOV     R3,?V1
   \   000004                REQUIRE ??Subroutine7_0
   \   000004                ; // Fall through to label ??Subroutine7_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine7_0:
   \   000000   74..         MOV     A,#temp_cal_table & 0xff
   \   000002   2A           ADD     A,R2
   \   000003   F582         MOV     DPL,A
   \   000005   74..         MOV     A,#(temp_cal_table >> 8) & 0xff
   \   000007   3B           ADDC    A,R3
   \   000008   F583         MOV     DPH,A
   \   00000A   78..         MOV     R0,#?V4
   \   00000C   22           RET

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_447a0000:
   \   000000   00007A44     DD 447A0000H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1:
   \   000000   01000000     DD 1H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_0:
   \   000000   00000000     DD 0H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_459c4000:
   \   000000   00409C45     DD 459C4000H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_4298a8f6:
   \   000000   F6A89842     DD 4298A8F6H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_4302e3d8:
   \   000000   D8E30243     DD 4302E3D8H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_42c80000:
   \   000000   0000C842     DD 42C80000H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_41200000:
   \   000000   00002041     DD 41200000H

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ADC_Reset?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ADC_Reset

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ADC_WriteByte?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ADC_WriteByte

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ADC_ReadByte?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ADC_ReadByte

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ADC_DisSelect?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ADC_DisSelect

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ADC_Select?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ADC_Select

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ADC_SpeedSet?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ADC_SpeedSet

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ADC_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ADC_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ADC_ReadData?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ADC_ReadData

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ADC_MeasureStart?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ADC_MeasureStart

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??CalculateRadiation?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CalculateRadiation

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??CalculateTemp?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CalculateTemp
    280          
    281          /*
    282          //¼ÆËãDHC3ÀàÐÍµÄÎÂ¶ÈÖµ
    283          float CalculateTemp_DHC3(float fr)
    284          {
    285          	float fTem;
    286          	float fL;
    287          	float fH;
    288          	int iTem;
    289          	uint8 cbottom,ctop;
    290          	uint8 i;
    291          	if(fr<RTD_TAB_PT100_DHC3[0])
    292          	{
    293          		return -60.0;
    294          	}
    295          	if(fr>RTD_TAB_PT100_DHC3[12])
    296          	{
    297          		return 60.0;
    298          	}
    299          	cbottom=0;
    300          	ctop=12;
    301          	for(i=6;(ctop-cbottom)!=1;)
    302          	{
    303          		if(fr<RTD_TAB_PT100_DHC3[i])
    304          		{
    305          			ctop=i;
    306          			i=(ctop+cbottom)/2;
    307          		}
    308          		else if(fr>RTD_TAB_PT100_DHC3[i])
    309          		{
    310          			cbottom=i;
    311          			i=(ctop+cbottom)/2;
    312          		}
    313          		else
    314          		{
    315          			iTem=(unsigned int)i*10-60;
    316          			fTem=(float)iTem;
    317          			return fTem;
    318          		}
    319          	}
    320          	iTem=(int)i*10-60;
    321          	fL=RTD_TAB_PT100_DHC3[cbottom];
    322          	fH=RTD_TAB_PT100_DHC3[ctop];
    323          	fTem=(((fr-fL)*10)/(fH-fL))+iTem;
    324          	return fTem;
    325          }
    326          */
    327          
    328          /*
    329          //¼ÆËãÍÁÈÀË®·ÖÖµ
    330          float CalculateSand(float voltage)
    331          {
    332          	float fTem;
    333          	float fL;
    334          	float fH;
    335          	int iTem;
    336          	uint8 cbottom,ctop;
    337          	uint8 i;
    338          	if(voltage<SAND[0])
    339          	{
    340          		return 0;
    341          	}
    342          	if(voltage>SAND[20])
    343          	{
    344          		return 100;
    345          	}
    346          	cbottom=0;
    347          	ctop=20;
    348          	for(i=10;(ctop-cbottom)!=1;)
    349          	{
    350          		if(voltage<SAND[i])
    351          		{
    352          			ctop=i;
    353          			i=(ctop+cbottom)/2;
    354          		}
    355          		else if(voltage>SAND[i])
    356          		{
    357          			cbottom=i;
    358          			i=(ctop+cbottom)/2;
    359          		}
    360          		else
    361          		{
    362          			iTem=(unsigned int)i*5;
    363          			fTem=(float)iTem;
    364          			return fTem;
    365          		}
    366          	}
    367          	iTem=(unsigned int)i*5;
    368          	fL=SAND[cbottom];
    369          	fH=SAND[ctop];
    370          	fTem=(((voltage-fL)*5)/(fH-fL))+iTem;
    371          	return fTem;
    372          }
    373          */
    374          
    375          
    376          
    377          
    378          
    379          
    380          
    381          
    382          
    383          
    384          
    385          /**************************************************************************************************
    386          **************************************************************************************************/
    387          

   Maximum stack usage in bytes:

   ISTACK XSTACK Function
   ------ ------ --------
      2     13   ADC_DisSelect
        2      0   -> SPI1_ReadWriteByte
      2      0   ADC_Init
        2      0   -> SPI1_Init
      0     13   ADC_MeasureStart
        0     13   -> ADC_DisSelect
        0     13   -> ADC_Reset
        0     13   -> ADC_Select
        0     13   -> SPI1_ReadWriteByte
        0     13   -> SPI1_SetSpeed
      2      0   ADC_ReadByte
        2      0   -> SPI1_ReadWriteByte
      0     10   ADC_ReadData
        0     10   -> ADC_DisSelect
        0     10   -> ADC_Select
        0     10   -> Onboard_wait
        0     10   -> SPI1_ReadWriteByte
        0     10   -> SPI1_SetSpeed
        0     10   -> WDT_Feed
      2     13   ADC_Reset
        2      0   -> Onboard_wait
      2     13   ADC_Select
        2      0   -> SPI1_ReadWriteByte
      2      0   ADC_SpeedSet
        2      0   -> SPI1_SetSpeed
      0      9   ADC_WriteByte
        0      9   -> SPI1_ReadWriteByte
      0     24   CalculateRadiation
      4     24   CalculateTemp


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       6  ??ADC_DisSelect?relay
       6  ??ADC_Init?relay
       6  ??ADC_MeasureStart?relay
       6  ??ADC_ReadByte?relay
       6  ??ADC_ReadData?relay
       6  ??ADC_Reset?relay
       6  ??ADC_Select?relay
       6  ??ADC_SpeedSet?relay
       6  ??ADC_WriteByte?relay
       6  ??CalculateRadiation?relay
       6  ??CalculateTemp?relay
       7  ??Subroutine6_0
      13  ??Subroutine7_0
       5  ?Subroutine0
       8  ?Subroutine1
       4  ?Subroutine2
      12  ?Subroutine3
       6  ?Subroutine4
      11  ?Subroutine5
       8  ADC_DisSelect
      46  ADC_Init
      93  ADC_MeasureStart
       6  ADC_ReadByte
      84  ADC_ReadData
      20  ADC_Reset
       8  ADC_Select
      13  ADC_SpeedSet
      13  ADC_WriteByte
     235  CalculateRadiation
     614  CalculateTemp
       1  P1DIR
       1  P1SEL
       1  P2DIR
      60  RTD_TAB_PT100
       1  _A_P1
       1  _A_P2
       4  __Constant_0
       4  __Constant_1
       4  __Constant_41200000
       4  __Constant_4298a8f6
       4  __Constant_42c80000
       4  __Constant_4302e3d8
       4  __Constant_447a0000
       4  __Constant_459c4000
       1  adc_done
       1  adc_state
      60  temp_cal_table

 
 1 206 bytes in segment BANKED_CODE
    66 bytes in segment BANK_RELAYS
     5 bytes in segment SFR_AN
   152 bytes in segment XDATA_ROM_C
     2 bytes in segment XDATA_Z
 
 1 272 bytes of CODE  memory
   120 bytes of CONST memory (+ 32 bytes shared)
     0 bytes of DATA  memory (+  5 bytes shared)
     2 bytes of XDATA memory

Errors: none
Warnings: none
